@startuml ATS_Scanner_Database_Model
!theme plain
skinparam backgroundColor #FAF9F6
skinparam classBackgroundColor #FFFFFF
skinparam classBorderColor #1E3A8A
skinparam classArrowColor #312E81
skinparam noteBkgColor #FDB813
skinparam noteBorderColor #DAA520

title ATS Scanner 2.0 - Database Schema & Entity Relationships

' Define the Users entity
class Users {
    _id: ObjectId <<PK>>
    --
    email: String <<UNIQUE>>
    password: String
    name: String [optional]
    is_verified: Boolean
    verification_code: String [optional]
    code_expires_at: DateTime [optional]
    created_at: DateTime
    --
    Methods:
    + create_user()
    + verify_email()
    + update_profile()
    + delete_account()
}

' Define the Scans entity
class Scans {
    _id: ObjectId <<PK>>
    --
    user_id: String <<FK>>
    resume_text: String
    job_description: String
    resume_filename: String [optional]
    ats_score: Number (0-100)
    missing_keywords: Array<String>
    matched_keywords: Array<String>
    ai_feedback: String
    detailed_improvements: Array<Object>
    quick_wins: Array<String>
    strengths: Array<String>
    timestamp: DateTime
    --
    Methods:
    + create_scan()
    + get_scan_details()
    + update_scan()
    + delete_scan()
}

' Define the Analysis Result structure
class AnalysisResult {
    jd_match: Number (0-100)
    missing_keywords: Array<String>
    matched_keywords: Array<String>
    profile_summary: String
    detailed_improvements: Array<Improvement>
    quick_wins: Array<String>
    strengths: Array<String>
}

' Define the Improvement structure
class Improvement {
    category: String
    issue: String
    suggestion: String
    impact: String
    priority: String (High/Medium/Low)
}

' Define relationships
Users "1" --> "*" Scans : has
Scans "1" --> "1" AnalysisResult : contains
AnalysisResult "1" --> "*" Improvement : includes

note right of Users
  **User Account Management**
  - Stores user credentials
  - Tracks verification status
  - Manages authentication
  - Supports profile updates
end note

note right of Scans
  **Resume Analysis Storage**
  - Stores analysis results
  - Links to user account
  - Maintains scan history
  - Tracks timestamps
end note

note right of AnalysisResult
  **AI Analysis Output**
  - Generated by Gemini LLM
  - Contains ATS score
  - Lists keyword matches
  - Provides feedback
end note

note right of Improvement
  **Detailed Suggestions**
  - Categorized improvements
  - Actionable recommendations
  - Priority-based ranking
  - Impact assessment
end note

@enduml
